<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pelletage Maxime</title>
<style>
body { margin:0; padding:0; font-family:Arial,sans-serif; color:#fff; background:linear-gradient(#001f3f,#003366); overflow-x:hidden; }

header { padding:20px; background:rgba(0,0,50,0.7); position:relative; text-align:center; }
header h1 { margin:0; font-size:2em; }
header p { margin:5px 0; }

/* Hamburger menu avec vibration */
.hamburger { position:absolute; top:20px; right:20px; cursor:pointer; z-index:1001; display:flex; flex-direction:column; justify-content:space-between; width:30px; height:25px; }
.bar { height:4px; width:100%; background:#fff; border-radius:2px; animation: vibrate 1s infinite; }
@keyframes vibrate { 0%,100%{ transform: translateX(0); } 25%{ transform: translateX(-2px); } 50%{ transform: translateX(2px); } 75%{ transform: translateX(-2px); } }

nav { position:fixed; top:0; right:-250px; width:250px; height:100%; background:rgba(0,0,50,0.95); transition:0.3s; display:flex; flex-direction:column; padding-top:60px; z-index:1000; }
nav a { color:#fff; text-decoration:none; padding:15px 20px; font-size:1.1em; border-bottom:1px solid rgba(255,255,255,0.1); }
nav a:hover { background:rgba(0,191,255,0.3); }

section { display:none; padding:30px; max-width:800px; margin:50px auto; background: rgba(0,0,0,0.5); border-radius:15px; transition:0.5s; }
section.active { display:block; }
h2 { border-bottom:2px solid #00bfff; padding-bottom:10px; margin-bottom:20px; }
ul { list-style:none; padding:0; }
ul li::before { content:"❄️ "; }

input, button, textarea { width:100%; padding:12px; margin-bottom:10px; border-radius:6px; border:none; font-size:1em; }
input:focus, textarea:focus { outline:none; border:2px solid #00bfff; }
button { background:#00bfff; color:#001f3f; font-weight:bold; cursor:pointer; transition:0.3s; }
button:hover { background:#0095d1; }

.snowflake { position:fixed; top:-10px; color:white; font-size:1.5em; animation-name:fall; animation-timing-function: linear; z-index:999; }
@keyframes fall { 0%{ transform:translateY(0); opacity:1; } 100%{ transform:translateY(100vh); opacity:0.5; } }

#messageBox { text-align:center; margin-top:10px; padding:10px; border-radius:8px; display:none; font-weight:bold; }
#messageBox.success { background: rgba(0,200,0,0.6); }
#messageBox.error { background: rgba(200,0,0,0.6); }

footer { text-align:center; padding:15px; background: rgba(0,0,50,0.7); margin-top:20px; }
</style>
</head>
<body>

<header>
<h1>❄️ Pelletage Maxime ❄️</h1>
<p>Service rapide et fiable</p>
<div class="hamburger" onclick="toggleMenu()">
<div class="bar"></div>
<div class="bar"></div>
<div class="bar"></div>
</div>
</header>

<nav id="sideMenu">
<a href="#" onclick="showSection('home')">Accueil</a>
<a href="#" onclick="showSection('services')">Mes services</a>
<a href="#" onclick="showSection('demande')">Demander un pelletage</a>
<a href="#" onclick="showSection('avis')">Avis</a>
</nav>

<!-- Accueil -->
<section id="home" class="active">
<h2>Bienvenue</h2>
<p>Service de pelletage rapide et fiable pour vos entrées, trottoirs et stationnements.</p>
<h3>Nos tarifs :</h3>
<ul>
<li>Pelletage : 10$ (peut aller jusqu’à 20$ si votre maison est loin)</li>
<li>Ajout de sel : 2$ (peut aller jusqu’à 10$ si votre maison est loin)</li>
</ul>
<p>Ces prix sont indicatifs et peuvent varier selon la distance et la taille de votre propriété. Pour un tarif exact, remplissez le formulaire de demande de pelletage.</p>
</section>

<!-- Services -->
<section id="services">
<h2>Mes services</h2>
<ul>
<li>Pelletage d’entrées de garage</li>
<li>Déneigement de trottoirs</li>
<li>Pelletage complet de la cour</li>
<li>Ajout de sel si besoin</li>
<li>Déglaçage et sablage</li>
</ul>
</section>

<!-- Demande -->
<section id="demande">
<h2>Demander un pelletage</h2>
<form id="pelletageForm">
<input type="text" id="name" placeholder="Ton nom" required>
<input type="text" id="address" placeholder="Adresse complète" required>
<input type="tel" id="phone" placeholder="Numéro de téléphone" required pattern="[0-9]{10}">
<input type="email" id="email" placeholder="Adresse courriel" required>
<label for="date" style="margin-bottom:5px; display:block;">Sélectionnez la date souhaitée :</label>
<input type="date" id="date" required>
<button type="submit">Envoyer la demande</button>
<div id="messageBox"></div>
</form>
</section>

<!-- Avis -->
<section id="avis">
<h2>Avis de nos clients</h2>
<p>Étoiles moyennes : <span id="averageStars">0</span>/5 ⭐</p>

<form id="avisForm">
<input type="text" id="username" placeholder="Nom d'utilisateur" required>
<label for="stars">Nombre d'étoiles (0 à 5) :</label>
<input type="number" id="stars" min="0" max="5" required>
<textarea id="message" placeholder="Votre avis (optionnel)"></textarea>
<button type="submit">Envoyer l'avis</button>
</form>

<div id="avisList"></div>
</section>

<footer>
<p>© 2025 Pelletage Maxime – Tous droits réservés</p>
<button id="adminBtn" style="margin-top:10px;">Zone Admin</button>
</footer>

<script>
  // Menu
  function toggleMenu(){
    const menu = document.getElementById('sideMenu');
    menu.style.right = (menu.style.right === "0px") ? "-250px" : "0px";
  }
  function showSection(id){
    document.querySelectorAll('section').forEach(sec=>sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    toggleMenu();
  }

  // Flocons de neige
  function createSnowflake() {
    const snowflake = document.createElement("div");
    snowflake.classList.add("snowflake");
    snowflake.textContent = "❄";
    snowflake.style.left = Math.random() * window.innerWidth + "px";
    snowflake.style.animationDuration = (Math.random() * 3 + 2) + "s"; 
    snowflake.style.opacity = Math.random();
    snowflake.style.fontSize = (Math.random() * 15 + 10) + "px";
    document.body.appendChild(snowflake);
    setTimeout(() => snowflake.remove(), 5000);
  }
  setInterval(createSnowflake, 200);

  // Formulaire Discord
  const webhookURL = "https://discord.com/api/webhooks/1399488282131435580/jP1VGYSHBPhuOnQsn0F5f3hNaVNiPVcZAQ2ewdvOjoBrFGX0m7rddaaXQKd7AP2h2hdy";
  const form = document.getElementById("pelletageForm");
  const messageBox = document.getElementById("messageBox");

  form.addEventListener("submit", function(e){
    e.preventDefault();
    const name = document.getElementById("name").value.trim();
    const address = document.getElementById("address").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const email = document.getElementById("email").value.trim();
    const date = document.getElementById("date").value;
    if(!name||!address||!phone||!email||!date){
      messageBox.textContent="Veuillez remplir tous les champs.";
      messageBox.className="error"; messageBox.style.display="block"; return;
    }
    const content = `**Nouvelle demande de pelletage**\nNom: ${name}\nAdresse: ${address}\nTéléphone: ${phone}\nEmail: ${email}\nDate souhaitée: ${date}`;
    fetch(webhookURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content})})
    .then(()=>{ messageBox.textContent="✅ Votre demande a été envoyée !"; messageBox.className="success"; messageBox.style.display="block"; form.reset(); })
    .catch(()=>{ messageBox.textContent="❌ Erreur, réessayez."; messageBox.className="error"; messageBox.style.display="block"; });
  });

  // Gestion des avis
  const avisForm = document.getElementById("avisForm");
  const avisList = document.getElementById("avisList");
  const averageStars = document.getElementById("averageStars");
  let avisData = JSON.parse(localStorage.getItem("avisData") || "[]");

  function updateAvisDisplay() {
    avisList.innerHTML = "";
    let totalStars = 0;
    avisData.forEach(avis => {
      totalStars += parseInt(avis.stars);
      const div = document.createElement("div");
      div.style.background="rgba(0,0,0,0.5)";
      div.style.padding="10px";
      div.style.margin="10px 0";
      div.style.borderRadius="8px";
      div.innerHTML = `<strong>${avis.username}</strong> - ${avis.stars} ⭐<br>${avis.message || ""}`;
      avisList.appendChild(div);
    });
    averageStars.textContent = avisData.length ? (totalStars / avisData.length).toFixed(1) : "0";
  }

  updateAvisDisplay();

  avisForm.addEventListener("submit", e=>{
    e.preventDefault();
    const username = document.getElementById("username").value.trim();
    const stars = document.getElementById("stars").value;
    const message = document.getElementById("message").value.trim();
    if(!username || stars === "") return alert("Veuillez remplir le nom et la note.");
    avisData.push({username, stars, message});
    localStorage.setItem("avisData", JSON.stringify(avisData));
    updateAvisDisplay();
    avisForm.reset();
  });

  // Zone Admin
  document.getElementById("adminBtn").addEventListener("click", () => {
    const username = prompt("Nom d'utilisateur :");
    const password = prompt("Mot de passe :");
    if(username === "Maxime Riopel" && password === "Billy0930") {
      alert("Connexion réussie ! Vous pouvez maintenant réinitialiser les avis.");
      if(confirm("Voulez-vous vraiment supprimer tous les avis ?")) {
        localStorage.removeItem("avisData");
        avisData = [];
        updateAvisDisplay();
        alert("Tous les avis ont été réinitialisés.");
      }
    } else {
      alert("Nom d'utilisateur ou mot de passe incorrect.");
    }
  });
</script>

</body>
</html>
